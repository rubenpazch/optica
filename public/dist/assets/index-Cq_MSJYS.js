import{r as l,a as F,b as T}from"./vendor-Gm9i_4Ku.js";import{u as q,L as k,O as U,a as L,N as B,B as M,R as z,b}from"./router-AmOfzmdZ.js";import{a as W}from"./utils-ngrFHoWO.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();var E={exports:{}},S={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H=l,J=Symbol.for("react.element"),K=Symbol.for("react.fragment"),Y=Object.prototype.hasOwnProperty,G=H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q={key:!0,ref:!0,__self:!0,__source:!0};function R(t,s,i){var c,r={},n=null,d=null;i!==void 0&&(n=""+i),s.key!==void 0&&(n=""+s.key),s.ref!==void 0&&(d=s.ref);for(c in s)Y.call(s,c)&&!Q.hasOwnProperty(c)&&(r[c]=s[c]);if(t&&t.defaultProps)for(c in s=t.defaultProps,s)r[c]===void 0&&(r[c]=s[c]);return{$$typeof:J,type:t,key:n,ref:d,props:r,_owner:G.current}}S.Fragment=K;S.jsx=R;S.jsxs=R;E.exports=S;var e=E.exports,C={},A=F;C.createRoot=A.createRoot,C.hydrateRoot=A.hydrateRoot;const p=W.create({baseURL:"/api/v1",headers:{"Content-Type":"application/json"},withCredentials:!0}),V=()=>localStorage.getItem("auth_token"),X=t=>localStorage.setItem("auth_token",t),O=()=>localStorage.removeItem("auth_token");p.interceptors.request.use(t=>{const s=V();return s&&(t.headers.Authorization=`Bearer ${s}`),t});p.interceptors.response.use(t=>{var s;return(s=t.data.data)!=null&&s.token&&X(t.data.data.token),t},t=>{var s;return((s=t.response)==null?void 0:s.status)===401&&O(),Promise.reject(t)});const w={login:async(t,s)=>(await p.post("/users/sign_in",{user:{email:t,password:s}})).data.data.user,register:async(t,s)=>(await p.post("/users",{user:{email:t,password:s,password_confirmation:s}})).data.data.user,logout:async()=>{try{await p.delete("/users/sign_out")}finally{O()}},getCurrentUser:async()=>(await p.get("/current_user")).data.user},P={getAll:async t=>(await p.get("/patients",{params:t})).data,getOne:async t=>(await p.get(`/patients/${t}`)).data,create:async t=>(await p.post("/patients",{patient:t})).data,update:async(t,s)=>(await p.put(`/patients/${t}`,{patient:s})).data,delete:async t=>{await p.delete(`/patients/${t}`)},toggleStatus:async t=>(await p.post(`/patients/${t}/toggle_status`)).data},Z={getStats:async()=>(await p.get("/dashboard")).data.dashboard},I=l.createContext(void 0),_=()=>{const t=l.useContext(I);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},ee=({children:t})=>{const[s,i]=l.useState(null),[c,r]=l.useState(!0);l.useEffect(()=>{n()},[]);const n=async()=>{try{const m=await w.getCurrentUser();i(m)}catch{i(null)}finally{r(!1)}},j={user:s,login:async(m,u)=>{try{const x=await w.login(m,u);i(x)}catch(x){throw x}},register:async(m,u)=>{try{const x=await w.register(m,u);i(x)}catch(x){throw x}},logout:async()=>{try{await w.logout()}catch(m){console.error("Logout error:",m)}finally{i(null)}},loading:c};return e.jsx(I.Provider,{value:j,children:t})},te=()=>{const{user:t,logout:s}=_(),i=q(),c=[{name:"Dashboard",href:"/",current:i.pathname==="/"},{name:"Patients",href:"/patients",current:i.pathname==="/patients"}],r=async()=>{try{await s()}catch(n){console.error("Logout failed:",n)}};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("nav",{className:"bg-white shadow",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex h-16 justify-between",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex flex-shrink-0 items-center",children:e.jsx("h1",{className:"text-2xl font-bold text-primary-600",children:"Optica"})}),e.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:c.map(n=>e.jsx(k,{to:n.href,className:`inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium ${n.current?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:n.name},n.name))})]}),e.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:items-center",children:e.jsx("div",{className:"relative ml-3",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm text-gray-700",children:t==null?void 0:t.email}),e.jsx("button",{onClick:r,className:"btn btn-secondary text-sm",children:"Logout"})]})})})]})})}),e.jsx("main",{className:"py-6",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsx(U,{})})})]})},se=()=>{const[t,s]=l.useState(null),[i,c]=l.useState(!0),[r,n]=l.useState("");l.useEffect(()=>{d()},[]);const d=async()=>{try{const o=await Z.getStats();s(o)}catch(o){n("Failed to load dashboard data"),console.error("Dashboard error:",o)}finally{c(!1)}};return i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):r?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:r}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Welcome to your optica management system"})]}),t&&e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Patients"}),e.jsx("dd",{className:"mt-1 text-3xl font-semibold text-gray-900",children:t.total_patients})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Active Patients"}),e.jsx("dd",{className:"mt-1 text-3xl font-semibold text-green-600",children:t.active_patients})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Inactive Patients"}),e.jsx("dd",{className:"mt-1 text-3xl font-semibold text-red-600",children:t.inactive_patients})]})})]}),t&&t.recent_patients.length>0&&e.jsx("div",{className:"card",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Recent Patients"}),e.jsx("div",{className:"flow-root",children:e.jsx("ul",{className:"-my-5 divide-y divide-gray-200",children:t.recent_patients.map(o=>e.jsx("li",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:[o.first_name," ",o.last_name]}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:o.email})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.active?"Active":"Inactive"})})]})},o.id))})})]})})]})},ae=()=>{const[t,s]=l.useState(null),[i,c]=l.useState(!0),[r,n]=l.useState(""),[d,o]=l.useState(""),[f,j]=l.useState(""),[m,u]=l.useState(""),[x,g]=l.useState(""),[h,y]=l.useState(1);l.useEffect(()=>{v()},[d,f,m,x,h]);const v=async()=>{try{c(!0);const a=await P.getAll({page:h,per_page:10,search:d||void 0,city:f||void 0,state:m||void 0,status:x||void 0});s(a)}catch(a){n("Failed to load patients"),console.error("Patients error:",a)}finally{c(!1)}},D=async a=>{try{await P.toggleStatus(a),v()}catch(N){console.error("Toggle status error:",N)}},$=async a=>{if(window.confirm("Are you sure you want to delete this patient?"))try{await P.delete(a),v()}catch(N){console.error("Delete patient error:",N)}};return i&&!t?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"sm:flex sm:items-center",children:[e.jsxs("div",{className:"sm:flex-auto",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Patients"}),e.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Manage your patient records"})]}),e.jsx("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:e.jsx("button",{className:"btn btn-primary",children:"Add Patient"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-4",children:[e.jsx("input",{type:"text",placeholder:"Search patients...",className:"input",value:d,onChange:a=>{o(a.target.value),y(1)}}),e.jsxs("select",{className:"input",value:f,onChange:a=>{j(a.target.value),y(1)},children:[e.jsx("option",{value:"",children:"All Cities"}),t==null?void 0:t.filters.cities.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsxs("select",{className:"input",value:m,onChange:a=>{u(a.target.value),y(1)},children:[e.jsx("option",{value:"",children:"All States"}),t==null?void 0:t.filters.states.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsxs("select",{className:"input",value:x,onChange:a=>{g(a.target.value),y(1)},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:r}),t&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.patients.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[a.first_name," ",a.last_name]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:a.email}),e.jsx("div",{className:"text-sm text-gray-500",children:a.phone})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[a.city,", ",a.state]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>D(a.id),className:"text-indigo-600 hover:text-indigo-900",children:"Toggle Status"}),e.jsx("button",{onClick:()=>$(a.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},a.id))})]})}),t.pagination.total_pages>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>y(Math.max(1,h-1)),disabled:h===1,className:"btn btn-secondary",children:"Previous"}),e.jsx("button",{onClick:()=>y(Math.min(t.pagination.total_pages,h+1)),disabled:h===t.pagination.total_pages,className:"btn btn-secondary",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",h," of ",t.pagination.total_pages," (",t.pagination.total_count," total)"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:Array.from({length:t.pagination.total_pages},(a,N)=>N+1).map(a=>e.jsx("button",{onClick:()=>y(a),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${a===h?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:a},a))})})]})]})]})]})},re=()=>{const[t,s]=l.useState(""),[i,c]=l.useState(""),[r,n]=l.useState(""),[d,o]=l.useState(!1),{login:f}=_(),j=L(),m=async u=>{var x,g;u.preventDefault(),n(""),o(!0);try{await f(t,i),j("/")}catch(h){n(((g=(x=h.response)==null?void 0:x.data)==null?void 0:g.error)||"Login failed")}finally{o(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsx("div",{children:e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to Optica"})}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[r&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:r}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"input mt-1",value:t,onChange:u=>s(u.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"input mt-1",value:i,onChange:u=>c(u.target.value)})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:d,className:"btn btn-primary w-full justify-center",children:d?"Signing in...":"Sign in"})}),e.jsx("div",{className:"text-center",children:e.jsx(k,{to:"/register",className:"text-primary-600 hover:text-primary-500",children:"Don't have an account? Sign up"})})]})]})})},ne=()=>{const[t,s]=l.useState(""),[i,c]=l.useState(""),[r,n]=l.useState(""),[d,o]=l.useState(""),[f,j]=l.useState(!1),{register:m}=_(),u=L(),x=async g=>{var h,y;if(g.preventDefault(),o(""),i!==r){o("Passwords do not match");return}j(!0);try{await m(t,i),u("/")}catch(v){o(((y=(h=v.response)==null?void 0:h.data)==null?void 0:y.error)||"Registration failed")}finally{j(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsx("div",{children:e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your Optica account"})}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[d&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:d}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"input mt-1",value:t,onChange:g=>s(g.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"input mt-1",value:i,onChange:g=>c(g.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,className:"input mt-1",value:r,onChange:g=>n(g.target.value)})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:f,className:"btn btn-primary w-full justify-center",children:f?"Creating account...":"Create account"})}),e.jsx("div",{className:"text-center",children:e.jsx(k,{to:"/login",className:"text-primary-600 hover:text-primary-500",children:"Already have an account? Sign in"})})]})]})})},ie=({children:t})=>{const{user:s,loading:i}=_();return i?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):s?e.jsx(e.Fragment,{children:t}):e.jsx(B,{to:"/login",replace:!0})};function le(){return e.jsx(ee,{children:e.jsx(M,{children:e.jsxs(z,{children:[e.jsx(b,{path:"/login",element:e.jsx(re,{})}),e.jsx(b,{path:"/register",element:e.jsx(ne,{})}),e.jsxs(b,{path:"/",element:e.jsx(ie,{children:e.jsx(te,{})}),children:[e.jsx(b,{index:!0,element:e.jsx(se,{})}),e.jsx(b,{path:"patients",element:e.jsx(ae,{})})]})]})})})}C.createRoot(document.getElementById("root")).render(e.jsx(T.StrictMode,{children:e.jsx(le,{})}));
