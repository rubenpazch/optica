<div class="patient-form-container">
  <div class="form-header">
    <h1 class="page-title">Editar Paciente</h1>
    <p class="page-subtitle">Actualiza la información de <%= @patient.full_name %></p>
  </div>

  <div class="patient-form">
    <%= form_with model: @patient, local: true, html: { class: "patient-form-content" } do |f| %>
      <%= render "shared/error_messages", resource: @patient %>

      <div class="form-sections">
        <!-- Información Personal -->
        <div class="form-section">
          <h3 class="section-title">Información Personal</h3>
          
          <div class="form-row">
            <div class="form-group">
              <%= f.label :first_name, "Nombre *", class: "form-label" %>
              <%= f.text_field :first_name, class: "form-control #{'is-invalid' if @patient.errors[:first_name].any?}", 
                              placeholder: "Ingrese el nombre" %>
              <% if @patient.errors[:first_name].any? %>
                <div class="invalid-feedback">
                  <%= @patient.errors[:first_name].first %>
                </div>
              <% end %>
            </div>
            
            <div class="form-group">
              <%= f.label :last_name, "Apellido *", class: "form-label" %>
              <%= f.text_field :last_name, class: "form-control #{'is-invalid' if @patient.errors[:last_name].any?}", 
                              placeholder: "Ingrese el apellido" %>
              <% if @patient.errors[:last_name].any? %>
                <div class="invalid-feedback">
                  <%= @patient.errors[:last_name].first %>
                </div>
              <% end %>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <%= f.label :email, "Correo Electrónico *", class: "form-label" %>
              <%= f.email_field :email, class: "form-control #{'is-invalid' if @patient.errors[:email].any?}", 
                                placeholder: "ejemplo@correo.com" %>
              <% if @patient.errors[:email].any? %>
                <div class="invalid-feedback">
                  <%= @patient.errors[:email].first %>
                </div>
              <% end %>
            </div>
            
            <div class="form-group">
              <%= f.label :phone, "Teléfono *", class: "form-label" %>
              <%= f.text_field :phone, class: "form-control #{'is-invalid' if @patient.errors[:phone].any?}", 
                              placeholder: "1234567890" %>
              <% if @patient.errors[:phone].any? %>
                <div class="invalid-feedback">
                  <%= @patient.errors[:phone].first %>
                </div>
              <% end %>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <%= f.label :birth_date, "Fecha de Nacimiento *", class: "form-label" %>
              <%= f.date_field :birth_date, class: "form-control #{'is-invalid' if @patient.errors[:birth_date].any?}" %>
              <% if @patient.errors[:birth_date].any? %>
                <div class="invalid-feedback">
                  <%= @patient.errors[:birth_date].first %>
                </div>
              <% end %>
            </div>
            
            <div class="form-group">
              <%= f.label :active, "Estado del Paciente", class: "form-label" %>
              <div class="checkbox-group">
                <%= f.check_box :active, { class: "form-check-input" } %>
                <%= f.label :active, "Paciente Activo", class: "form-check-label" %>
              </div>
            </div>
          </div>
        </div>

        <!-- Información de Dirección -->
        <div class="form-section">
          <h3 class="section-title">Dirección</h3>
          
          <div class="form-group">
            <%= f.label :address, "Dirección Completa", class: "form-label" %>
            <%= f.text_area :address, rows: 2, class: "form-control", 
                           placeholder: "Calle, número, colonia, etc." %>
          </div>

          <div class="form-row">
            <div class="form-group">
              <%= f.label :city, "Ciudad *", class: "form-label" %>
              <%= f.text_field :city, class: "form-control #{'is-invalid' if @patient.errors[:city].any?}", 
                              placeholder: "Ciudad" %>
              <% if @patient.errors[:city].any? %>
                <div class="invalid-feedback">
                  <%= @patient.errors[:city].first %>
                </div>
              <% end %>
            </div>
            
            <div class="form-group">
              <%= f.label :state, "Estado *", class: "form-label" %>
              <%= f.text_field :state, class: "form-control #{'is-invalid' if @patient.errors[:state].any?}", 
                              placeholder: "Estado" %>
              <% if @patient.errors[:state].any? %>
                <div class="invalid-feedback">
                  <%= @patient.errors[:state].first %>
                </div>
              <% end %>
            </div>
            
            <div class="form-group">
              <%= f.label :zip_code, "Código Postal", class: "form-label" %>
              <%= f.text_field :zip_code, class: "form-control", 
                              placeholder: "12345" %>
            </div>
          </div>
        </div>

        <!-- Contacto de Emergencia -->
        <div class="form-section">
          <h3 class="section-title">Contacto de Emergencia</h3>
          
          <div class="form-row">
            <div class="form-group">
              <%= f.label :emergency_contact, "Nombre del Contacto", class: "form-label" %>
              <%= f.text_field :emergency_contact, class: "form-control", 
                              placeholder: "Nombre completo del contacto" %>
            </div>
            
            <div class="form-group">
              <%= f.label :emergency_phone, "Teléfono de Emergencia", class: "form-label" %>
              <%= f.text_field :emergency_phone, class: "form-control", 
                              placeholder: "1234567890" %>
            </div>
          </div>
        </div>

        <!-- Información del Seguro -->
        <div class="form-section">
          <h3 class="section-title">Información del Seguro</h3>
          
          <div class="form-row">
            <div class="form-group">
              <%= f.label :insurance_provider, "Proveedor de Seguro", class: "form-label" %>
              <%= f.text_field :insurance_provider, class: "form-control", 
                              placeholder: "Nombre de la aseguradora" %>
            </div>
            
            <div class="form-group">
              <%= f.label :insurance_number, "Número de Póliza", class: "form-label" %>
              <%= f.text_field :insurance_number, class: "form-control", 
                              placeholder: "Número de póliza o membresía" %>
            </div>
          </div>
        </div>

        <!-- Notas Adicionales -->
        <div class="form-section">
          <h3 class="section-title">Notas Adicionales</h3>
          
          <div class="form-group">
            <%= f.label :notes, "Notas", class: "form-label" %>
            <%= f.text_area :notes, rows: 4, class: "form-control", 
                           placeholder: "Información adicional sobre el paciente..." %>
            <small class="form-text">Información médica relevante, preferencias, etc.</small>
          </div>
        </div>
      </div>

      <!-- Acciones del Formulario -->
      <div class="form-actions">
        <%= f.submit "Actualizar Paciente", class: "btn btn-primary" %>
        <%= link_to "Ver Paciente", @patient, class: "btn btn-secondary" %>
        <%= link_to "Cancelar", patients_path, class: "btn btn-outline" %>
      </div>
    <% end %>
  </div>
</div>